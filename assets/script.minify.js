const passBox=document.getElementById("passBox"),passIndiccator=document.getElementById("passIndiccator"),sliderValue=document.getElementById("sliderValue"),inputSlider=document.getElementById("inputSlider"),lowercase=document.getElementById("lowercase"),numbers=document.getElementById("numbers"),uppercase=document.getElementById("uppercase"),symbols=document.getElementById("symbols"),generateBtn=document.getElementById("genBtn"),copyBtn=document.getElementById("copyIcon"),historyList=document.getElementById("historyList"),themeSwitch=document.getElementById("themeSwitch"),lowercaseLetters="abcdefghijklmnopqrstuvwxyz",uppercaseLetters="ABCDEFGHIJKLMNOPQRSTUVWXYZ",numbersList="0123456789",symbolsList="!@#$%^&*()_+-=[]{}\\|;':\",./<>?";window.addEventListener("DOMContentLoaded",()=>{let e=localStorage.getItem("passwordLength"),t=JSON.parse(localStorage.getItem("passwordOptions"));e&&(inputSlider.value=e),t&&(lowercase.checked=t.lowercase,uppercase.checked=t.uppercase,numbers.checked=t.numbers,symbols.checked=t.symbols),sliderValue.textContent=inputSlider.value,generatePassword()}),sliderValue.textContent=inputSlider.value,inputSlider.addEventListener("input",()=>{sliderValue.textContent=inputSlider.value,generatePassword()});const generatePassword=()=>{let e=inputSlider.value,t="",s="";if(t+=lowercase.checked?"abcdefghijklmnopqrstuvwxyz":"",t+=uppercase.checked?"ABCDEFGHIJKLMNOPQRSTUVWXYZ":"",t+=numbers.checked?"0123456789":"",!(t+=symbols.checked?"!@#$%^&*()_+-=[]{}\\|;':\",./<>?":"")){alert("Veuillez s\xe9lectionner au moins une option pour g\xe9n\xe9rer un mot de passe.");return}for(let n=0;n<e;n++)s+=t.charAt(Math.floor(Math.random()*t.length));passBox.value=s,updatePasswordIndicator(),addPasswordToHistory(s)};generateBtn.addEventListener("click",()=>{localStorage.setItem("passwordLength",inputSlider.value),localStorage.setItem("passwordOptions",JSON.stringify({lowercase:lowercase.checked,uppercase:uppercase.checked,numbers:numbers.checked,symbols:symbols.checked})),generatePassword()});const updatePasswordIndicator=()=>{let e=getPasswordStrength(passBox.value);passIndiccator.className="pass-indicator "+e},getPasswordStrength=e=>e.length<=10?"weak":e.length<=20?"medium":"strong",addPasswordToHistory=e=>{let t=document.createElement("li");t.textContent=e,historyList.prepend(t)};copyBtn.addEventListener("click",()=>{passBox.value.trim().length>0&&(navigator.clipboard.writeText(passBox.value),copyBtn.innerHTML="done_all",copyBtn.style.color="#4caf50",setTimeout(()=>{copyBtn.innerHTML="content_copy",copyBtn.style.color="#333"},2e3))});const setTheme=e=>{document.body.classList.toggle("dark-theme",e),localStorage.setItem("darkTheme",e)};themeSwitch.addEventListener("change",()=>{setTheme(themeSwitch.checked)}),window.addEventListener("DOMContentLoaded",()=>{let e=JSON.parse(localStorage.getItem("darkTheme"));setTheme(e),themeSwitch.checked=e});